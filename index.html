<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Platform Cube</title>

<style>
body{
 margin:0;
 background:#050510;
 color:#0ff;
 font-family:Arial;
 text-align:center;
 overflow:hidden;
}

#menu{
 position:absolute;
 inset:0;
 display:flex;
 flex-direction:column;
 justify-content:center;
 align-items:center;
 background:radial-gradient(circle,#0a0a25,#000);
}

h1{
 font-size:42px;
 text-shadow:0 0 25px #0ff;
}

button{
 font-size:24px;
 padding:16px 40px;
 margin-top:20px;
 background:#0ff;
 border:none;
 color:#000;
 box-shadow:0 0 30px #0ff;
}

canvas{
 display:none;
 margin:0 auto;
 background:#050510;
}
</style>
</head>

<body>

<div id="menu">
 <h1>NEON CUBE</h1>
 <button onclick="start()">▶ ИГРАТЬ</button>
 <p>Тапай для прыжка</p>
</div>

<canvas id="game" width="360" height="520"></canvas>

<script>
const c = document.getElementById("game");
const x = c.getContext("2d");

let y=420, vy=0;
let gravity=0.9;
let speed=6; // быстрее
let run=false;
let score=0;

let platforms=[];
let coins=[];

function start(){
 document.getElementById("menu").style.display="none";
 c.style.display="block";
 y=420; vy=0;
 score=0;
 platforms=[];
 coins=[];
 run=true;
 loop();
}

document.addEventListener("click",jump);
document.addEventListener("touchstart",jump);

function jump(){
 if(!run)return;
 if(y>=420 || onPlatform()){
  vy=-16;
 }
}

function onPlatform(){
 for(let p of platforms){
  if(180>p.x && 180<p.x+p.w &&
     y+40>=p.y && y+40<=p.y+10){
     return true;
  }
 }
 return false;
}

function loop(){
 if(!run)return;
 x.clearRect(0,0,360,520);

 // physics
 vy+=gravity;
 y+=vy;
 if(y>420){y=420;vy=0}

 // player
 x.shadowColor="#0ff";
 x.shadowBlur=20;
 x.fillStyle="#0ff";
 x.fillRect(160,y,40,40);

 // spawn platforms
 if(Math.random()<0.03){
  let h = Math.random()<0.5 ? 350 : 280; // обычный путь
  platforms.push({x:360,y:h,w:80});
 }

 // secret platforms (опасные)
 if(Math.random()<0.008){
  platforms.push({x:360,y:200,w:60,secret:true});
  coins.push({x:380,y:170,taken:false});
 }

 // draw platforms
 x.shadowColor="#f0f";
 for(let p of platforms){
  x.fillStyle = p.secret ? "#ff0" : "#f0f";
  x.fillRect(p.x,p.y,p.w,12);

  // collision
  if(180>p.x && 180<p.x+p.w &&
     y+40>=p.y && y+40<=p.y+vy){
     y=p.y-40;
     vy=0;
  }

  p.x-=speed;
 }

 // coins
 x.shadowColor="#ff0";
 x.fillStyle="#ff0";
 for(let c1 of coins){
  if(!c1.taken){
   x.beginPath();
   x.arc(c1.x,c1.y,8,0,Math.PI*2);
   x.fill();

   if(Math.abs(c1.x-180)<15 && Math.abs(c1.y-(y+20))<15){
    c1.taken=true;
    score+=200; // награда за секрет
   }
  }
  c1.x-=speed;
 }

 // ground
 x.shadowBlur=0;
 x.fillStyle="#0ff";
 x.fillRect(0,460,360,4);

 // cleanup
 platforms=platforms.filter(p=>p.x>-100);
 coins=coins.filter(c1=>c1.x>-50);

 // score
 score++;
 x.fillText("Score: "+score,10,30);

 // death
 if(y>480){
  gameOver();
 }

 requestAnimationFrame(loop);
}

function gameOver(){
 run=false;
 setTimeout(()=>{
  alert("GAME OVER\nScore: "+score);
  location.reload();
 },100);
}
</script>

</body>
</html>

